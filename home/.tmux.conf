# ==================================================
# General Setup
# ==================================================

# Set the default terminal to enable 256-color support.
set -g default-terminal "tmux-256color"

# Enable RGB color capabilities for compatible terminals (like ghostty).
set-option -sa terminal-features ',xterm-256color:RGB'

# Reduce the delay between pressing escape and tmux recognizing it.
set -s escape-time 0

# Allow passthrough of special escape sequences for features like italics.
set-option -g allow-passthrough on

# Enable mouse support for scrolling, pane selection, etc.
set -g mouse on

# Use vi-style keybindings in copy mode.
setw -g mode-keys vi

# Automatically renumber windows when one is closed to avoid gaps.
set-option -g renumber-windows on


# ==================================================
# Theme & Appearance (Ash Theme)
# ==================================================
# Note: 'default' for background colors makes them transparent.

# Set the position of the status bar to the top.
set -g status-position top

# Center the window list in the status bar.
set -g status-justify absolute-centre

# --- Main Status Bar Style ---
# fg: Main text color (#d0d0d0), bg: Transparent.
set -g status-style 'fg=#d0d0d0 bg=default'

# --- Left Status Bar ---
# Content: Show the session name.
set -g status-left '#S'
# Style: Use the 'constant' color (#a0a0a0) for the session name.
set -g status-left-style 'fg=#a0a0a0'
# Length: Set a fixed length for the left part of the status bar.
set -g status-left-length 20

# --- Right Status Bar ---
# Content: Empty by default.
set -g status-right ''
# (Optional) Uncomment the line below to show the current time.
# set -g status-right '%H:%M'
# Style: Use the main text color.
set -g status-right-style 'fg=#d0d0d0'
# Length: Set a fixed length for the right part of the status bar.
set -g status-right-length 20


# --- Window List Style ---
# Format for the currently active window (index:name).
setw -g window-status-current-format '#I:#W '
# Style for the active window: Use bright white (#e8e8e8) and bold text.
setw -g window-status-current-style 'fg=#e8e8e8 bg=default bold'

# Format for inactive windows (index:name).
setw -g window-status-format '#I:#W '
# Style for inactive windows: Use the 'comment' color (#808080) for a dimmed look.
setw -g window-status-style 'fg=#808080 bg=default'

# --- Pane Borders ---
# Style for inactive pane borders, using the 'border' color (#303030).
set -g pane-border-style 'fg=#303030'
# Style for the active pane border, using a slightly brighter gray (#585858).
set -g pane-active-border-style 'fg=#585858'

# --- Command/Message Line ---
# Style for the tmux command prompt and messages.
set -g message-style 'fg=#e8e8e8 bg=#303030'


# ==================================================
# Keybindings & Scripts
# ==================================================

# Open lazygit in a new window.
bind G new-window -n 'lazygit' lazygit

# Open a fuzzy-finding sessionizer script.
bind-key f run-shell "tmux neww ~/.config/scripts/tmux-sessionizer.sh"

# Open the sessionizer script scoped to the ~/Projects directory.
bind-key -r P run-shell "~/.config/scripts/tmux-sessionizer.sh ~/Projects"

# Use 'y' to copy to the system clipboard in vi-copy mode.
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"


# ==================================================
# Plugins
# ==================================================

# Sensible default tmux options.
set -g @plugin 'tmux-plugins/tmux-sensible'
# Fuzzy searching with fzf.
set -g @plugin 'sainnhe/tmux-fzf'
# Yanking/copying utilities.
set -g @plugin 'tmux-plugins/tmux-yank'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run -b '~/.config/tmux/plugins/tpm/tpm'
